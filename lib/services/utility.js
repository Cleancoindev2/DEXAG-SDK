"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator")),_asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator")),_ethers=require("ethers"),_erc=_interopRequireDefault(require("../../abi/erc20.json")),_weth=_interopRequireDefault(require("../../abi/weth.json")),utility={getTokenContract:function getTokenContract(a,b){var c=a.metadata.input.address;return new _ethers.ethers.Contract(c,_erc["default"],b)},getWethContract:function getWethContract(a){return new _ethers.ethers.Contract("0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2",_weth["default"],a)},getEtherToWrap:function(){var a=(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function a(b,c,d){var e,f,g,h,i,j,k,l;return _regenerator["default"].wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e="0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2",b.metadata.input){a.next=3;break}return a.abrupt("return",0);case 3:if(b.metadata.input.address==e){a.next=5;break}return a.abrupt("return",0);case 5:return f=b.metadata.input.amount,g=new _ethers.ethers.Contract(e,_erc["default"],d),a.next=9,d.getAddress();case 9:return h=a.sent,a.next=12,g.balanceOf(h);case 12:return i=a.sent,a.next=15,d.getBalance();case 15:if(j=a.sent,!i.gte(f)){a.next=18;break}return a.abrupt("return",0);case 18:if(k=j.add(i),!k.lt(f)){a.next=21;break}return a.abrupt("return",-1);case 21:return l=i.sub(f).mul(-1),a.abrupt("return",l.toString());case 23:case"end":return a.stop();}},a)}));return function getEtherToWrap(){return a.apply(this,arguments)}}(),handleReceipt:function handleReceipt(a,b,c){"0x1"==b.status?c("mined_trade",a.hash):c("failed",a.hash)}},_default=utility;exports["default"]=_default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zZXJ2aWNlcy91dGlsaXR5LmpzIl0sIm5hbWVzIjpbInV0aWxpdHkiLCJnZXRUb2tlbkNvbnRyYWN0IiwidHJhZGUiLCJzaWduZXIiLCJ0b2tlbkFkZHJlc3MiLCJtZXRhZGF0YSIsImlucHV0IiwiYWRkcmVzcyIsImV0aGVycyIsIkNvbnRyYWN0IiwiZXJjMjBBYmkiLCJnZXRXZXRoQ29udHJhY3QiLCJ3ZXRoQWJpIiwiZ2V0RXRoZXJUb1dyYXAiLCJwcm92aWRlciIsIndldGhUb2tlbkFkZHJlc3MiLCJ3ZXRoQW1vdW50IiwiYW1vdW50Iiwid2V0aENvbnRyYWN0IiwiZ2V0QWRkcmVzcyIsImFjY291bnRBZGRyZXNzIiwiYmFsYW5jZU9mIiwid2V0aEJhbGFuY2UiLCJnZXRCYWxhbmNlIiwiYmFsYW5jZSIsImd0ZSIsInRvdGFsQmFsYW5jZSIsImFkZCIsImx0IiwiZXRoVG9XcmFwIiwic3ViIiwibXVsIiwidG9TdHJpbmciLCJoYW5kbGVSZWNlaXB0Iiwic3RhdHVzIiwicmVjZWlwdCIsImhhbmRsZXIiLCJoYXNoIl0sIm1hcHBpbmdzIjoia2ZBS01BLE9BQU8sQ0FBRyxDQUNkQyxnQkFBZ0IsQ0FBRSwwQkFBQ0MsQ0FBRCxDQUFRQyxDQUFSLENBQW1CLENBQ25DLEdBQU1DLENBQUFBLENBQVksQ0FBR0YsQ0FBSyxDQUFDRyxRQUFOLENBQWVDLEtBQWYsQ0FBcUJDLE9BQTFDLENBQ0EsTUFBTyxJQUFJQyxnQkFBT0MsUUFBWCxDQUFvQkwsQ0FBcEIsQ0FBa0NNLGVBQWxDLENBQTRDUCxDQUE1QyxDQUNSLENBSmEsQ0FLZFEsZUFBZSxDQUFFLHlCQUFDUixDQUFELENBQVksQ0FFM0IsTUFBTyxJQUFJSyxnQkFBT0MsUUFBWCw4Q0FBc0NHLGdCQUF0QyxDQUErQ1QsQ0FBL0MsQ0FDUixDQVJhLENBU1JVLGNBVFEseUdBU09YLENBVFAsQ0FTY1ksQ0FUZCxDQVN3QlgsQ0FUeEIsNkdBVU5ZLENBVk0sQ0FVYSw0Q0FWYixDQVdQYixDQUFLLENBQUNHLFFBQU4sQ0FBZUMsS0FYUiwwQ0FZSCxDQVpHLFlBY1JKLENBQUssQ0FBQ0csUUFBTixDQUFlQyxLQUFmLENBQXFCQyxPQUFyQixFQUFnQ1EsQ0FkeEIsMENBZUgsQ0FmRyxlQWlCTkMsQ0FBQUEsQ0FqQk0sQ0FpQk9kLENBQUssQ0FBQ0csUUFBTixDQUFlQyxLQUFmLENBQXFCVyxNQWpCNUIsQ0FrQk5DLENBbEJNLENBa0JTLEdBQUlWLGdCQUFPQyxRQUFYLENBQW9CTSxDQUFwQixDQUFzQ0wsZUFBdEMsQ0FBZ0RQLENBQWhELENBbEJULFVBbUJpQkEsQ0FBTSxDQUFDZ0IsVUFBUCxFQW5CakIsY0FtQk5DLENBQUFBLENBbkJNLGtCQW9CY0YsQ0FBWSxDQUFDRyxTQUFiLENBQXVCRCxDQUF2QixDQXBCZCxlQW9CTkUsQ0FBQUEsQ0FwQk0sa0JBcUJVbkIsQ0FBTSxDQUFDb0IsVUFBUCxFQXJCVixZQXFCTkMsQ0FyQk0sU0FzQlJGLENBQVcsQ0FBQ0csR0FBWixDQUFnQlQsQ0FBaEIsQ0F0QlEsMkNBd0JILENBeEJHLGFBMEJOVSxDQTFCTSxDQTBCU0YsQ0FBTyxDQUFDRyxHQUFSLENBQVlMLENBQVosQ0ExQlQsRUEyQlJJLENBQVksQ0FBQ0UsRUFBYixDQUFnQlosQ0FBaEIsQ0EzQlEsMkNBNkJILENBQUMsQ0E3QkUsZ0JBZ0NOYSxDQUFBQSxDQWhDTSxDQWdDTVAsQ0FBVyxDQUFDUSxHQUFaLENBQWdCZCxDQUFoQixFQUE0QmUsR0FBNUIsQ0FBZ0MsQ0FBQyxDQUFqQyxDQWhDTixtQkFpQ0xGLENBQVMsQ0FBQ0csUUFBVixFQWpDSyxpSEFtQ2RDLGFBQWEsQ0FBRSx1QkFBQ0MsQ0FBRCxDQUFTQyxDQUFULENBQWtCQyxDQUFsQixDQUE2QixDQUN2QixLQUFoQixFQUFBRCxDQUFPLENBQUNELE1BRCtCLENBRXhDRSxDQUFPLENBQUMsYUFBRCxDQUFnQkYsQ0FBTSxDQUFDRyxJQUF2QixDQUZpQyxDQUl4Q0QsQ0FBTyxDQUFDLFFBQUQsQ0FBV0YsQ0FBTSxDQUFDRyxJQUFsQixDQUVWLENBekNhLEMsVUE0Q0RyQyxPIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZXRoZXJzIH0gZnJvbSAnZXRoZXJzJztcblxuaW1wb3J0IGVyYzIwQWJpIGZyb20gJy4uLy4uL2FiaS9lcmMyMC5qc29uJztcbmltcG9ydCB3ZXRoQWJpIGZyb20gJy4uLy4uL2FiaS93ZXRoLmpzb24nO1xuXG5jb25zdCB1dGlsaXR5ID0ge1xuICBnZXRUb2tlbkNvbnRyYWN0OiAodHJhZGUsIHNpZ25lcikgPT4ge1xuICAgIGNvbnN0IHRva2VuQWRkcmVzcyA9IHRyYWRlLm1ldGFkYXRhLmlucHV0LmFkZHJlc3M7XG4gICAgcmV0dXJuIG5ldyBldGhlcnMuQ29udHJhY3QodG9rZW5BZGRyZXNzLCBlcmMyMEFiaSwgc2lnbmVyKTtcbiAgfSxcbiAgZ2V0V2V0aENvbnRyYWN0OiAoc2lnbmVyKSA9PiB7XG4gICAgY29uc3Qgd2V0aFRva2VuQWRkcmVzcyA9ICcweGMwMmFhYTM5YjIyM2ZlOGQwYTBlNWM0ZjI3ZWFkOTA4M2M3NTZjYzInO1xuICAgIHJldHVybiBuZXcgZXRoZXJzLkNvbnRyYWN0KHdldGhUb2tlbkFkZHJlc3MsIHdldGhBYmksIHNpZ25lcik7XG4gIH0sXG4gIGFzeW5jIGdldEV0aGVyVG9XcmFwKHRyYWRlLCBwcm92aWRlciwgc2lnbmVyKSB7XG4gICAgY29uc3Qgd2V0aFRva2VuQWRkcmVzcyA9ICcweGMwMmFhYTM5YjIyM2ZlOGQwYTBlNWM0ZjI3ZWFkOTA4M2M3NTZjYzInO1xuICAgIGlmICghdHJhZGUubWV0YWRhdGEuaW5wdXQpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBpZiAodHJhZGUubWV0YWRhdGEuaW5wdXQuYWRkcmVzcyAhPSB3ZXRoVG9rZW5BZGRyZXNzKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgY29uc3Qgd2V0aEFtb3VudCA9IHRyYWRlLm1ldGFkYXRhLmlucHV0LmFtb3VudDtcbiAgICBjb25zdCB3ZXRoQ29udHJhY3QgPSBuZXcgZXRoZXJzLkNvbnRyYWN0KHdldGhUb2tlbkFkZHJlc3MsIGVyYzIwQWJpLCBzaWduZXIpO1xuICAgIGNvbnN0IGFjY291bnRBZGRyZXNzID0gYXdhaXQgc2lnbmVyLmdldEFkZHJlc3MoKTtcbiAgICBjb25zdCB3ZXRoQmFsYW5jZSA9IGF3YWl0IHdldGhDb250cmFjdC5iYWxhbmNlT2YoYWNjb3VudEFkZHJlc3MpO1xuICAgIGNvbnN0IGJhbGFuY2UgPSBhd2FpdCBzaWduZXIuZ2V0QmFsYW5jZSgpO1xuICAgIGlmICh3ZXRoQmFsYW5jZS5ndGUod2V0aEFtb3VudCkpIHtcbiAgICAgIC8vIEVub3VnaCB3ZXRoLCBubyBuZWVkIHRvIHdyYXBcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBjb25zdCB0b3RhbEJhbGFuY2UgPSBiYWxhbmNlLmFkZCh3ZXRoQmFsYW5jZSk7XG4gICAgaWYgKHRvdGFsQmFsYW5jZS5sdCh3ZXRoQW1vdW50KSkge1xuICAgICAgLy8gSW5zdWZmaWNpZW50IGJhbGFuY2VcbiAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgLy8gZXRoIHRvIHdyYXAgPSB3ZXRoIHJlcXVpcmVkIGZvciB0cmFkZSAtIHdldGggYmFsYW5jZVxuICAgIGNvbnN0IGV0aFRvV3JhcCA9IHdldGhCYWxhbmNlLnN1Yih3ZXRoQW1vdW50KS5tdWwoLTEpO1xuICAgIHJldHVybiBldGhUb1dyYXAudG9TdHJpbmcoKTtcbiAgfSxcbiAgaGFuZGxlUmVjZWlwdDogKHN0YXR1cywgcmVjZWlwdCwgaGFuZGxlcik9PiB7XG4gICAgaWYocmVjZWlwdC5zdGF0dXM9PScweDEnKXtcbiAgICAgIGhhbmRsZXIoJ21pbmVkX3RyYWRlJywgc3RhdHVzLmhhc2gpO1xuICAgIH1lbHNle1xuICAgICAgaGFuZGxlcignZmFpbGVkJywgc3RhdHVzLmhhc2gpO1xuICAgIH1cbiAgfSxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHV0aWxpdHk7XG4iXX0=